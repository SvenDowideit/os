FROM alpine
# TODO: redo as cross platform, and without git etc :)

# not installed atm udev, grub2, kexe-toos
# parted: partprobe, e2fsprogs: mkfs.ext4, syslinux: extlinux&syslinux
RUN apk --no-cache add syslinux parted e2fsprogs

COPY conf /scripts/
#COPY ./build/vmlinuz-${KERNEL_VERSION} ./build/initrd ./build/ros /dist/
RUN ln -s /bootiso/boot/ /dist \
    && ln -s /host/usr/bin/ros /scripts/

ENTRYPOINT ["/scripts/ros"]

